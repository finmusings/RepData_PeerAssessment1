<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>Reproducible Research: Peer Assessment 1</title>

<script src="PA1_template_files/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="PA1_template_files/bootstrap-3.3.1/css/bootstrap.min.css" rel="stylesheet" />
<script src="PA1_template_files/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="PA1_template_files/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="PA1_template_files/bootstrap-3.3.1/shim/respond.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="PA1_template_files/highlight/default.css"
      type="text/css" />
<script src="PA1_template_files/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">


<div id="header">
<h1 class="title">Reproducible Research: Peer Assessment 1</h1>
</div>


<div id="set-up-the-environment-load-libraries-required" class="section level2">
<h2>Set up the environment – load libraries required</h2>
<pre class="r"><code>library(&quot;dplyr&quot;)</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;
## 
## The following object is masked from &#39;package:stats&#39;:
## 
##     filter
## 
## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre class="r"><code>library(&quot;lattice&quot;)</code></pre>
</div>
<div id="loading-and-preprocessing-the-data" class="section level2">
<h2>Loading and preprocessing the data</h2>
<p>Read into data table:</p>
<pre class="r"><code>fit_table&lt;-read.csv(unz(&quot;activity.zip&quot;,&quot;activity.csv&quot;))</code></pre>
</div>
<div id="what-is-mean-total-number-of-steps-taken-per-day" class="section level2">
<h2>What is mean total number of steps taken per day?</h2>
<p>Strategy: use aggregate() to compute a data frame of sums by day, then use this data for the histogram plot and average/median computations.</p>
<pre class="r"><code>## total_steps contains the total number of steps taken each day 
##    (summed across all 5 min time intervals)

## sum up all observations for each day, ignoring NA values
total_steps &lt;- aggregate(fit_table$steps,by=list(fit_table$date),sum)


## create a histogram showing the frequency distribution of 
##    daily step totals
hist(total_steps$x, breaks=20, main=&quot;Histogram of Average Steps per Day&quot;,
     xlab=&quot;Daily Step Total&quot;)</code></pre>
<p><img src="PA1_template_files/figure-html/unnamed-chunk-3-1.png" /></p>
<pre class="r"><code>## compute and display the arithmetic average of daily step totals
cat(&quot;Average Daily Step Total: &quot;, mean(total_steps$x,na.rm=TRUE))</code></pre>
<pre><code>## Average Daily Step Total:  10766.19</code></pre>
<pre class="r"><code>## compute and display the median daily step total
cat(&quot;Median Daily Step Total: &quot;, median(total_steps$x,na.rm=TRUE))</code></pre>
<pre><code>## Median Daily Step Total:  10765</code></pre>
</div>
<div id="what-is-the-average-daily-activity-pattern" class="section level2">
<h2>What is the average daily activity pattern?</h2>
<p>Strategy: Use aggregate() to compute a data frame of means by interval, then plot this data.</p>
<pre class="r"><code>## steps_by_interval contains the average number of steps in each time 
##    interval across the 61 days in the data

## average steps in a given time interval across all days in the data set, 
##    ignoring NA values
steps_by_interval &lt;- aggregate(fit_table$steps,by=list(fit_table$interval), 
                               mean, na.rm=TRUE)

plot(steps_by_interval$Group.1, steps_by_interval$x,type=&quot;l&quot;, xlab=&quot;Interval&quot;,
     ylab=&quot;Avg Steps per Interval&quot;, main=&quot;Daily Activity Pattern&quot;)</code></pre>
<p><img src="PA1_template_files/figure-html/unnamed-chunk-4-1.png" /></p>
<pre class="r"><code>## compute maximum average steps by interval and output both number and interval
max_int &lt;- max(steps_by_interval$x)
max_time &lt;- steps_by_interval[steps_by_interval$x==max_int,]
cat(&quot;maximum steps per interval is &quot;, max_int, 
    &quot; recorded in interval &quot;, as.integer(max_time[1,1]))</code></pre>
<pre><code>## maximum steps per interval is  206.1698  recorded in interval  835</code></pre>
</div>
<div id="imputing-missing-values" class="section level2">
<h2>Imputing missing values</h2>
<p>Strategy: Use the average steps in each interval as the imputed value for each NA in the same interval.</p>
<pre class="r"><code>## calculate number of missing values

missing_data &lt;- is.na(fit_table$steps)
cat(&quot;number of missing values&quot;, sum(missing_data))</code></pre>
<pre><code>## number of missing values 2304</code></pre>
<pre class="r"><code>## use dplyr to manipulate data when imputing missing values

## create new table that contains original data plus interval means
int1&lt;- tbl_df(left_join(fit_table,
           as_data_frame(list(interval=steps_by_interval$Group.1, 
           mean_steps=steps_by_interval$x))))</code></pre>
<pre><code>## Joining by: &quot;interval&quot;</code></pre>
<pre class="r"><code>## add variable with imputed steps
## step one -- replace NA with zero
steps_z&lt;-fit_table$steps
steps_z[is.na(steps_z)]&lt;-0
## step 2 add imputed steps as steps_i variable to table
int2&lt;-mutate(int1, steps_i=steps_z+mean_steps*missing_data)

## create new data frame identical to original except for imputed NAs
new_fit_table &lt;- data.frame(steps=int2$steps_i,date=int2$date,
                           interval=int2$interval)

##compute new total steps
total_steps2 &lt;- aggregate(new_fit_table$steps,by=list(new_fit_table$date),sum)

## create a histogram showing the frequency distribution of 
##    daily step totals
hist(total_steps2$x, breaks=20, main=&quot;Histogram of Average Steps per Day&quot;,
     xlab=&quot;Daily Step Total&quot;)</code></pre>
<p><img src="PA1_template_files/figure-html/unnamed-chunk-5-1.png" /></p>
<pre class="r"><code>## compute and display the arithmetic average of daily step totals
cat(&quot;Average Daily Step Total: &quot;, mean(total_steps2$x))</code></pre>
<pre><code>## Average Daily Step Total:  10766.19</code></pre>
<pre class="r"><code>## compute and display the median daily step total
cat(&quot;Median Daily Step Total: &quot;, median(total_steps2$x))</code></pre>
<pre><code>## Median Daily Step Total:  10766.19</code></pre>
<p>NAs were replaced with mean for that time interval over the entire data set. The NAs were all clustered such that there were 8 days with only NAs and no NAs outside of those 8 days. The effect of this strategy of filling in NAs was to remove 8 days of zero steps and add 8 days with a total step count equal to the sum of the means by interval (which, by construction is the same as the mean of the non-missing days). Thus there was no change to the mean. Since the 8 days were a large proportion of the data (8/61) and were clustered in the middle of the data, the sum of the interval means became the median daily total.</p>
</div>
<div id="are-there-differences-in-activity-patterns-between-weekdays-and-weekends" class="section level2">
<h2>Are there differences in activity patterns between weekdays and weekends?</h2>
<p>Strategy: create a function to return “Weekday” and “Weekend” as appropriate</p>
<p>Lattice library used for panel plot</p>
<pre class="r"><code>## function to be called in next step
wkend&lt;-function(dotw){
        if(dotw==&quot;Sat&quot; | dotw==&quot;Sun&quot;) wkend&lt;-&quot;Weekend&quot; else wkend&lt;-&quot;Weekday&quot;
         wkend
}

## add a column to the data frame with the factor Weekday/Weekend
int1&lt;-mutate(new_fit_table,wkfac=sapply(weekdays(strptime(new_fit_table$date,
                  format=&quot;%Y-%m-%d&quot;), abbreviate=TRUE),wkend))

## average steps in a given time interval across all days in the data set, 
##      separately for weekdays and weekends 
steps_by_interval2 &lt;- aggregate(int1$steps,by=list(int1$wkfac, int1$interval), 
                                mean)
## use attach to so I can refer to just the elements of steps_by_interval2
attach(steps_by_interval2)
## panel plot using Lattice
xyplot(x~Group.2|Group.1,type=&quot;l&quot;,xlab=&quot;Interval&quot;,
     ylab=&quot;Avg Steps per Interval&quot;, main=&quot;Daily Activity Pattern&quot;, 
     layout=c(1,2),scales=list(y=list(alternating=FALSE)))</code></pre>
<p><img src="PA1_template_files/figure-html/unnamed-chunk-6-1.png" /></p>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
